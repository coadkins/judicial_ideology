---
title: "Model Diary"
format: html
---

```{r}
library(stringi)
library(targets)
library(qs2)
library(paws.storage)
```

# Graphical Results

```{r}
#| label: update targets metadata
tar_meta_download()
```

```{r}
#| label: trace-plots
plot <- tar_read(mcmc_trace_plots)
print(plot)
```

```{r}
#| label: ppc-plot
plot <- tar_read(mcmc_ppc_plot)
print(plot)
```

```{r}
#| label: validation-plot
plot2 <- tar_read(mcmc_validation_plot)
print(plot2)
```

# Comments
The date and hash of the current model run is:
```{r target-hash}
stri_c(
  c(
    as.character(
      as.Date(
        tar_meta(mcmc_mcmc_hirt.hom, "time")[[2]]
      )
    ),
    tar_meta(mcmc_mcmc_hirt.hom, "data")[[2]]
  ),
  collapse = "-"
)
```

- 2025-08-23-3119968a700f0552. Model from Git commit 256f9b6. "Soft" constraint on the means with respect to the reference group mean. This model is not identified.

- 2025-08-24-f5bbae606a882937. Model from Git commit efed46cd. "Hard" constraint on the means with respect to reference group. This model appears to be well identified for theta, but does not appear to capturing the between group variation very well.

- 2025-08-25-ac2a1415cac34ee5. Model from Git commit e21fb69. Corrected assignment of prior to the intercept term. This model is not identified. 

- 2025-08-25-7bf8bd016013471d. Model from Git commit e1d76eb. Corrected an error in how I was slicing `theta_nc` when calculating the non-centered version of `theta`. Model has good mixing of chains, but is not capturing between group variation very well. 
